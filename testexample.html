<!DOCTYPE html>
<html>
<head>

<title>anbado player example</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script src="http://popcornjs.org/code/dist/popcorn-complete.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.createjs.com/easeljs-0.6.1.min.js"></script>
<script src="http://localhost:8888/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<link rel="stylesheet" type="text/css" href="basiccss.css">
<script type="text/javascript">

$("#textinput2").css("width", "400");



var inputPanelShow = false; // 한번 클릭된 상태라면 다른 쪽을 클릭하면 패널이 사라져야 함



var socket;
jQuery(function() {
    socket = io.connect("http://localhost:8888/");

    socket.on('connect', function() {
        socket.on('return', function(data) {
            console.log(data);
        });

        socket.emit('sample', {hello: 'world'});
    });
});
// socket.on('connect', function (data) {
//   console.log(data);
//   socket.emit('my other event', { my: 'data' });
//   socket.on('return', function(data) {console.log(data)})
// });

var popcornobj; // global access video object. global variable is not recommended
var totalEvent =0; // total event number
var currentEventPosition = 0;

var canvaslayer; // canvas overlay

var canvas_bar;

var container;
var stage;
var stage_bar;
var time_posision=0;


var eventList = new Array();

var emoticonNumber = 4;

var eaTextInputField; // 이 네가지 변수는 local로 전환할 것
var eaTextInputButton;
var eaEmoticonInputArray;



function getFocus(){
    $("#textinput1").focus();
}
//
document.addEventListener( "DOMContentLoaded", function() {

    hidePanel();

//    $("#textinput1").focus(function(){
//        alert("focus inner");
//    }); // 포커스 체크 함수
//    $("#textinput1").hover(function(){getFocus();});


$(".emoticon_button").css("width", 50);
$(".emoticon_button").css("height", 50); // 이모티콘 이미지 조정

var totalCount = 0;
popcornobj = Popcorn.smart("ourvideo"); // 팝콘 객체 생성

popcornobj.on("play", function() {
    console.log("Playing!");


    popcornobj.on("timeupdate", function(){
        for(currentEventPosition = 0; currentEventPosition<eventList.length; currentEventPosition++){
            var deltaTime = this.currentTime()-eventList[currentEventPosition].eventVideoClickTime; // 현재시간과 객체가 표시되기로 한 시간을 비교
            if((deltaTime<0)||(deltaTime>=eventList[currentEventPosition].eventVideoClickDuration)||(this.currentTime()===this.duration())){   // seeking bar가 생성시간 뒤에 있을시, 객체가 보여준 후 일정 시간이 지나면 비디오가 끝나면 디스플레이를 없애준다.
                stage.removeChild(eventList[currentEventPosition].eaCanvasDisplayObject); // 제한 시간이 되면 캔버스에서 표현된 객체를 지움
                stage.update();
            }else if(deltaTime <= eventList[currentEventPosition].eventVideoClickDuration ){
                stage.addChild(eventList[currentEventPosition].eaCanvasDisplayObject); // 보여주기
                stage.update();
            }
            totalCount++;
            console.log("TOTAL : " + totalCount);
//            console.log("this time:"+this.currentTime());
        }


        var tek=0;
        tek=this.currentTime();
        tek=parseInt(tek);

        if(tek>intvidiotime)
        {good=0;bad=0;}
        //console.log("vidiotime:"+this.currentTime()+"inttime:"+intvidiotime );

        intvidiotime=this.currentTime();
        intvidiotime=parseInt(intvidiotime);

    });
    // socket.emit('sample',{hello: popcornobj.currentTime()});
});

canvaslayer = document.getElementById("canvas1");
canvaslayer.onclick = displayInputPanel;

stage = new createjs.Stage(canvaslayer);
canvas_bar = document.getElementById("canvas2");
stage_bar = new createjs.Stage(canvas_bar); // 하단 차트 표시할 부분

container = new createjs.Container();
container.x=0;
container.y=0;

// console.log($("#textinput1").val());
//socket io 부분 테스팅

//offset 값으로 나중에 수정 video의 위치
$("#canvas1").css({"top":100,"left":330});
$("#canvas2").css({"top":600,"left":330});
$("#ourvideo").css({"top":100,"left":330});
$("#textinput1").css({"top":100,"left":240});
$("#permissionSelect").css({"top":100,"left":240});

    $("#visualization").css({"top":700,"left":240});

    var durationtime=0;
    setTimeout(function(){
        if(popcornobj!="NaN")
        {
            durationtime= popcornobj.duration();
            make_array(durationtime);
            console.log(durationtime);

            if(graphshape==1)
            {stactareachart();}
            else if(graphshape==2)
            {line();}
            else if(graphshape==3)
            {pichart();}
            else if(graphshape==4)
            {halfpichart();}


        }
    },1000);

// $("input:text").hide();
// $("input:submit").hide();


// enterKeyInit(); // DOM을 넘겨줘서 실행하는 것으로



//stage.onMouseDown = displayInputPanel; // on mouse click - input event occur. onClick does not work


});
var tempEvent = {}; // 전역 이벤트를 만들어 좌표를 전달. 패턴 수정 필요


function textinput2Keydown(){
    $("#textinput1").attr("size", $("#textinput1").val().length); // by text length size scailing. key by key
}


function displayInputPanel(evt){ // on first screen, display text input panel, submit button, emoticon panel

    // alert(eventObject);
    // alert(eventObject.eventContent);

    // $("input:text").show();
    // $("input:submit").show();
    /*
     var textinput1 = document.createElement("input"); // 자바스크립트로 동적 생성하도록
     textinput1.setAttribute("id", "textinput1");
     textinput1.setAttribute("type", "text");
     textinput1.setAttribute("value", "input");

     $("#textinput1").css("width", "100px");
     $("#textinput1").css("height", "15px");
     */



    if(inputPanelShow === false){
        inputPanelShow = true; // 클릭이 되었음을 표시
        console.log("on hide");

//        displayInputPanel(eventObject);

        tempEvent.x = evt.pageX;
        tempEvent.y = evt.pageY; // 전역을 이용하여 좌표 전달. 개선해야할 패턴이다.

        $("#textinput1").css({"top": evt.pageY,"left":evt.pageX});
        $("#textinput1").keydown(keyDownCheck);
        $("#permissionSelect").css({"top":evt.pageY,"left":evt.pageX +200});
        $("#emoticonPanel").css({"top":evt.pageY+25,"left":evt.pageX});

        showPanel();


    }
    else if(inputPanelShow === true){ // 클릭이 되어 있는 경우
        console.log("on show");
        inputPanelShow = false;
        hidePanel();


    }

    setTimeout(function(){getFocus();},300);

    var emo0 = document.getElementById("emoticon0");
    emo0.addEventListener("click", emoticonDOMClick);
    var emo1 = document.getElementById("emoticon1");
    emo1.addEventListener("click", emoticonDOMClick);
    var emo2 = document.getElementById("emoticon2");
    emo2.addEventListener("click", emoticonDOMClick);
    var emo3 = document.getElementById("emoticon3");
    emo3.addEventListener("click", emoticonDOMClick);

    console.log(emo0);

//
//    eaTextInputField = new createjs.DOMElement("textinput1");
//    eaTextInputButton = new createjs.DOMElement("permissionSelect");
//
//    eaEmoticonInputArray = new Array();
//
//    for(var i =0 ; i < emoticonNumber; i++) // 각 이모티콘 DOM 객체를 캔버스 객체로 할당
//    {
//
//        var eaTemp = new createjs.DOMElement("emoticon"+i);
//
//        eaTemp.regX = -100-(50*i); // emoticon positioning
//        eaTemp.regY = -100;
//        eaTemp.x = stage.mouseX + 120;
//        eaTemp.y = stage.mouseY;
////        eaTemp.htmlElement.onclick = emoticonClick; // 이모티콘 클릭 이벤트 핸들
//
//        eaEmoticonInputArray.push(eaTemp);
//
////        stage.addChild(eaEmoticonInputArray[i]);
//
//    }
//    // DOM객체로 직접 입력을 받지 않고 easeljs 객체로 변환하는 이유는 캔버스위에서 조정하기가 더 편하기 때문.
//    // jquery를 이용하더라도 canvas의 마우스 좌표등은 받을 수 있으나 캔버스 위에서 easeljs를 사용을 많이 하므로 변환 사용이 편리하다.
//
//    // console.log(eaTextInputField.htmlElement);
//
//    eaTextInputField.regX = 20;
//    eaTextInputField.regY = 10;
//
//    eaTextInputField.x = stage.mouseX;
//    eaTextInputField.y = stage.mouseY;
//
//
//
//    eaTextInputButton.regX = -180;
//    eaTextInputButton.regY = 0;
//    eaTextInputButton.x = stage.mouseX;
//    eaTextInputButton.y = stage.mouseY;
//
////    stage.addChild(eaTextInputButton); // 스테이지에 easel 객체로 인풋 패널 추가.
////    stage.addChild(eaTextInputField);
//
//    // 인풋 패널을 그려주고 난 후 이벤트에 따라 처리함. eventObject의 eaCanvasDisplayObject 객체에 대한 할당

//    stage.update(); // 패널 보여주고 나서 스테이지 업데이트

    // document.getElementById("textinput1").focus();
    // eaTextInputField.htmlElement.focus(); // DOM 객체 포커스를 통해 바로 텍스트입력하도록

//    eaTextInputField.htmlElement.onkeydown = keyDownCheck; // 텍스트 창에서 키 입력에 대한 이벤트 핸들러
    // console.log("eaemoticon" + eaEmoticonInput.getAttritute());
}

function keyDownCheck(evt) // DOM의 이벤트를 easeljs의 htmlElement를 통해서 사용. onkeypress대신 onkeydown을 사용해야 esc 받을 수 있
{
    $("#textinput1").attr("size", $("#textinput1").val().length); // by text length size scailing. key by key


    if(evt.keyCode == 13){ // 엔터인 경우

        eventGenerate(evt);
        endup();
    }

    if(evt.keyCode === 27 || evt.charCode === 27){ // webkit 브라우져에서 keyCode에서의 esc를 못받는 것을 해결하기 위해
        console.log("escape");
        hidePanel();
    }
}

function showPanel(){

    inputPanelShow = true;
    $("#textinput1").show("scale",300);
    $("#permissionSelect").show("scale",300);
    $("#emoticonPanel").show("scale",300);
}

function hidePanel(){

    inputPanelShow = false;
    $("#textinput1").hide("slow");
    $("#permissionSelect").hide("slow");
    $("#emoticonPanel").hide("slow");
}


function emoticonDOMClick(evt){
// 각 이모티콘 객체에 대한 이벤트 핸들러
    console.log("DOMClick");
    eventGenerate(evt);
}


function eventGenerate(evt){ // video interaction event generation

    console.log("on event");
    var eventObject = {
        eventID : totalEvent,
        eventOwnerName : "owner",
        eventOwnerProfilePicture : "profile url",
        eventVideoClickTime : popcornobj.currentTime(), // 플레어에서의 currentTime을 받는 것으로
        eventOccuredAbsoluteTime : (new Date().getTime()), // 이벤트가 생성된 현재 시간.
        eventVideoClickDuration : 2, // 얼마나 지속되는지
        eventPosX : tempEvent.x  - canvaslayer.offsetLeft,  // 화면의 디스플레이를 표시하도록. 실제로 디스플레이 되는 것은 eaCanvasDisplayObject이나 좌표값은 보존한다.
        eventPosY : tempEvent.y  - canvaslayer.offsetTop,
        timelineOffset : {},  // 타임라인에서 얼마나 떨어져 있는가?
        eventType : evt.target.id, // event type e.g text, emoticon, image, button action, webcam
        eventContent : "event content",
        eventPermission : $("#permissionSelect").val(),
        secUnit : 100* Math.round(popcornobj.currentTime() / popcornobj.duration()),// 몇번째 유닛인지?
        eaCanvasDisplayObject : {}
    };
    console.log(eventObject.eventPosX+","+ eventObject.eventPosY );



    switch(evt.target.id)
    {
        case "textinput1":
                console.log(evt);
            eventObject.eaCanvasDisplayObject = new createjs.Container();
            eventObject.eventContent = $("#textinput1").val(); // 사용자의 현재 입력값을 받는다. jquery 이용

            var eaTextContent = new createjs.Text(eventObject.eventContent, "25px Arial", "#ffffff");
            eaTextContent.regX = 0;
            eaTextContent.regY = 0;
            eaTextContent.x = eventObject.eventPosX;
            eaTextContent.y = eventObject.eventPosY;

            var eaBackPanel = new createjs.Shape();
            var eaAlpha = 0.2;
            eaBackPanel.graphics.beginFill("rgba(0,0,0,0.1)").drawRect(eventObject.eventPosX,eventObject.eventPosY, 120,40); // 불투명도가 계속해서 높아지는 버그가 있음. easeljs issue인 듯
            eaBackPanel.regX = 0;
            eaBackPanel.regY = 0;


            var eaProfileImage = new createjs.Bitmap("AssetImages/profile1.png"); // profile example
            eaProfileImage.regX = 0;
            eaProfileImage.regY = 0;
            eaProfileImage.x = eventObject.eventPosX - 60;
            eaProfileImage.y = eventObject.eventPosY;
            eaProfileImage.scaleX = eaProfileImage.scaleY = eaProfileImage.scale = 0.2;

            eventObject.eaCanvasDisplayObject.addChild(eaBackPanel,eaTextContent,eaProfileImage); // 뒷 배경과 무관하게 넣어주기 위해서 백패널을 이용함

            stage.addChild(eventObject.eaCanvasDisplayObject);

            eventList.push(eventObject); // 전체 이벤트 목록에 저장
            stage.update();
            break;

        case "emoticon0":
            eaDisplaySetting(eventObject, evt.target.id);
            break;
        case "emoticon1":
            eaDisplaySetting(eventObject, evt.target.id);
            break;
        case "emoticon2":
            eaDisplaySetting(eventObject, evt.target.id);
            break;
        case "emoticon3":
            eaDisplaySetting(eventObject, evt.target.id);
            break;

        default :
            alert("default");


    }



    endup();



}

function eaDisplaySetting(eventObject, content){

    eventObject.eaCanvasDisplayObject = new createjs.Container();
    console.log(content);

    var eaTempEmoticon = new createjs.Bitmap("AssetImages/" + content + ".png"); // make emoticon easeljs object

    eaTempEmoticon.regX = 0;
    eaTempEmoticon.regY = 0;
    eaTempEmoticon.x = eventObject.eventPosX;
    eaTempEmoticon.y = eventObject.eventPosY;
    eaTempEmoticon.scaleX = eaTempEmoticon.scaleY = eaTempEmoticon.scale = 0.4;

    var eaBackPanel = new createjs.Shape();
    eaBackPanel.graphics.beginFill("#000").drawRect(eventObject.eventPosX,eventObject.eventPosY, 0, 0);
    eaBackPanel.regX = 0;
    eaBackPanel.regY = 0;

    var eaProfileImage = new createjs.Bitmap("AssetImages/profile1.png"); // profile example
    eaProfileImage.regX = 0;
    eaProfileImage.regY = 0;
    eaProfileImage.x = eventObject.eventPosX - 50;
    eaProfileImage.y = eventObject.eventPosY;
    eaProfileImage.scaleX = eaProfileImage.scaleY = eaProfileImage.scale = 0.2;

    eventObject.eaCanvasDisplayObject.addChild(eaBackPanel, eaTempEmoticon ,eaProfileImage); // 뒷 배경과 무관하게 넣어주기 위해서 백패널을 이용함
    stage.addChild(eventObject.eaCanvasDisplayObject);



    console.log("emoticon");
    eventList.push(eventObject); // 전체 이벤트 목록에 저장
    endup();
}

function endup(){ // 이벤트 후 처리 부분



    stage.update();
    hidePanel();

    totalEvent++;

    setTimeout(function(){getFocus();},100);
}

//     if(popcornobj.currentTime()==popcornobj.duration())// check video end
//     {
//       $("input:text").hide();
//       $("input:submit").hide();
//    // 동영상이 끝나고 클릭했을 경우 입력 패널이 뜨는 문제점을 방지하기 위해
//     }


//  //    if(popcornobj.currentTime()==popcornobj.duration())// check video end
//  //     {      $("input:text").hide();
//  //   $("input:submit").hide();
//  //   // 동영상이 끝나고 클릭했을 경우 입력 패널이 뜨는 문제점을 방지하기 위해
//  // }


//   }




</script>


<link href="nv.d3.css" rel="stylesheet" type="text/css">

<style>


    #text {
        font: 12px sans-serif;

        position: absolute;
        top:900px;
        left:0;

    }

    #stackedarea {
        height: 110px;
        position: absolute;
        top:700px;
        left:0;
    }


        /*line chart */

    svg {
        display: block;
    }

    #linechart svg {
        height: 100px;
        min-width: 100px;
        min-height: 100px;
        position: absolute;
        top:700px;
        left:0;
    }

        /*pichart*/
    #pichart
    {
        position: absolute;
        top:700px;
        left:0;


    }

        /*half chart*/
    #halfchart
    {
        position: absolute;
        top:700px;
        left:0;

    }

    .mypiechart {
        width: 500px;
        border: 2px;
    }

        /*scatter_chart*/


    #offsetDiv {
        margin-left: 100px;
        margin-top: 100px;
    }


    #scatterchart {
        margin: 0;
        position: absolute;
        top:800px;
        left:0;
        width:1500px;
    }

    #scatterchart svg {
        height: 1500px;
        width: 1000px;

    }

</style>
<script src="d3.v3.js"></script>
<script src="nv.d3.js"></script>

<script type="text/javascript">

var time=0;

var good=0 ,bad=0,sad=0;
var intvidiotime=0

var arrayg = [],arrayb = [];

var graphshape=0;

var time_posision=0;
var inttime=0;

var data = [];

function make_array( gettime )
{

    gettime=parseInt(gettime);
    gettime=gettime+1;
    console.log("array time:"+gettime);


    //array 2d ㅁ만들기
    for (var i=0;i<gettime;i++)
    {// 앞에 꺼 time
        arrayg[i] = [];
        arrayb[i] = [];
    }


    for(var j=0;j<gettime;j++)
    {
        arrayg[j][0] = j;arrayg[j][1] = 0.1;
        arrayb[j][0] = j;arrayb[j][1] = 0.1;

    }

}


function drawVisualization() {


    var inttime= 0;

    inttime=popcornobj.currentTime();
    inttime=parseInt(inttime);


    arrayg[inttime][1] = (arrayg[inttime][1]+good);
    arrayb[inttime][1] = (arrayb[inttime][1]+bad);


    console.log("time:"+arrayg[inttime][1]);



    if(graphshape==1)
    {stactareachart();}
    else if(graphshape==2)
    {line();}
    else if(graphshape==3)
    {pichart();}
    else if(graphshape==4)
    {halfpichart();}
}




function happybutton()
{

    good++;
    drawVisualization();
}

function sadbutton()
{
    bad++;
    drawVisualization();
}

function stactareachart()
{
    var histcatexplong = [
        {
            "key" : "good" ,
            "values" : arrayg
        },
        {
            "key" : "bad" ,
            "values" : arrayb
        }

    ];

    var colors = d3.scale.category20();
    var keyColor = function(d, i) {return colors(d.key)};

    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
                .x(function(d) { return d[0] })
                .y(function(d) { return d[1] })
                .color(keyColor)
        //.clipEdge(true);

// chart.stacked.scatter.clipVoronoi(false);        // x축 날짜로 나타남
//
//  chart.xAxis
//      .tickFormat(function(d) { return d3.time.format('%x')(new Date(d)) });

        chart.yAxis
                .tickFormat(d3.format(',.2f'));

        d3.select('#stackedarea')
                .datum(histcatexplong)
                .transition().duration(500).call(chart);

        nv.utils.windowResize(chart.update);

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

        return chart;
    });

}

function line()
{
    // Wrapping in nv.addGraph allows for '0 timeout render', stores rendered charts in nv.graphs, and may do more in the future... it's NOT required
    var chart;
    var goood = [],baad=[];

    for (var i = 0; i < arrayg.length; i++) {
        goood.push({x: arrayg[i][0], y: arrayg[i][1]-0.1 }); //the nulls are to show how defined works
        baad.push({x: arrayb[i][0], y: arrayb[i][1]});
    }


    var test =[
        {
            values: goood,
            key: "good",
            color: "#2ca02c"
        },
        {
            values: baad,
            key: "bad",
            color: "red"
        }

    ];


    nv.addGraph(function() {
        chart = nv.models.lineChart();

        chart
                .x(function(d,i) { return i })


        chart.xAxis // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
                .tickFormat(d3.format(',.1f'));

        chart.yAxis
                .axisLabel('Voltage (v)')
                .tickFormat(d3.format(',.2f'));

        chart.showXAxis(true);

        d3.select('#linechart svg')
            //.datum([]) //for testing noData
                .datum(test)
                .transition().duration(500)
                .call(chart);

        //TODO: Figure out a good way to do this automatically
        nv.utils.windowResize(chart.update);
        //nv.utils.windowResize(function() { d3.select('#chart1 svg').call(chart) });

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

        return chart;
    });
}



function pichart()
{
    var goodpi= 0,badpi=0;

    for(var k=0;k<arrayg.length;k++)
    {
        goodpi=goodpi+(arrayg[k][1]-0.1);
        badpi=badpi+(arrayb[k][1]-0.1);
    }

    var testdata = [
        {
            key: "good",
            y: goodpi+0.01
        },
        {
            key: "bad",
            y: badpi+0.01
        }
    ];

    nv.addGraph(function() {
        var width = 200,
                height = 200;

        var chart = nv.models.pieChart()
                .x(function(d) { return d.key })
                .y(function(d) { return d.y })
            //.showLabels(false)
                .values(function(d) { return d })
                .color(d3.scale.category10().range())
                .width(width)
                .height(height);

        d3.select("#pie")
                .datum([testdata])
                .transition().duration(1200)
                .attr('width', width)
                .attr('height', height)
                .call(chart);

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

        return chart;
    });
}


function halfpichart()
{

    var goodpi= 0,badpi=0;

    for(var k=0;k<arrayg.length;k++)
    {
        goodpi=goodpi+(arrayg[k][1]-0.1);
        badpi=badpi+(arrayb[k][1]-0.1);
    }

    var testdata = [
        {
            key: "good",
            y: goodpi+0.01
        },
        {
            key: "bad",
            y: badpi+0.01
        }
    ];

    nv.addGraph(function() {

        var width = 200,
                height = 200;

        var chart = nv.models.pieChart()
                .x(function(d) { return d.key })
            //.y(function(d) { return d.value })
                .values(function(d) { return d })
            //.labelThreshold(.08)
            //.showLabels(false)
                .color(d3.scale.category10().range())
                .width(width)
                .height(height)
                .donut(true);

        chart.pie
                .startAngle(function(d) { return d.startAngle/2 -Math.PI/2 })
                .endAngle(function(d) { return d.endAngle/2 -Math.PI/2 });

        //chart.pie.donutLabelsOutside(true).donut(true);

        d3.select("#halfpi")
            //.datum(historicalBarChart)
                .datum([testdata])
                .transition().duration(1200)
                .attr('width', width)
                .attr('height', height)
                .call(chart);

        return chart;
    });

}



function graphselect()
{
//    var gra=document.selectform;
    var graphTemp = $("#graphSelector").val();

    if(graphTemp === "1" )//area graph
    {graphshape=1;
        
        stactareachart();
        $('.areadiv').show();
        $('.linediv').hide();
        $('.piediv').hide();
        $('.halfdiv').hide();
    }
    else if(graphTemp === "2") //line graph
    {graphshape=2;
        line();
        $('.areadiv').hide();
        $('.linediv').show();
        $('.piediv').hide();
        $('.halfdiv').hide();
    }
    else if(graphTemp === "3")
    {graphshape=3;
        pichart();
        $('.areadiv').hide();
        $('.linediv').hide();
        $('.piediv').show();
        $('.halfdiv').hide();
    }
    else if(graphTemp === "4")
    {graphshape=4;
        halfpichart()
        $('.areadiv').hide();
        $('.linediv').hide();
        $('.piediv').hide();
        $('.halfdiv').show();
    }

}

</script>

</head>
<body>
<div>
    <video id="ourvideo" controls="false">
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.mp4"/>
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.ogv"/>
        <source src="http://videos.mozilla.org/serv/webmademovies/popcornplug.webm"/>
    </video>
    <div id="canvascontainer">
        <canvas id="canvas1" width = "640px" height = "430px"></canvas>
        <canvas id="canvas2"width = "640px" height = "50px"></canvas>
        <canvas id="canvasMyChat" width = "320px" height = "500px"></canvas>
        <canvas id="canvasFriendChat" width = "320px" height = "500px"></canvas>
    </div>

</div>

<input id="textinput1" type = "text" value = "input">
<select id = "permissionSelect">
    <option value="me only">Me only</option>
    <option value="my friends">My friends</option>
    <option value="everybody">Everybody</option>
</select>


<input id="textinput2" type = "text" value = "interactive"/>
<input id="textbutton2" type = "button" value= "now"/>
<div id="emoticonPanel">
<table id = "emoticonTable">
    <tr>
        <td align="center"><input id="emoticon0" type="image" src="AssetImages/emoticon0.png" name="button" value="Joy" class="emoticon_button"/> </td>
        <td align="center"><input id="emoticon1" type="image" src="AssetImages/emoticon1.png" name="button" value="Hope" class="emoticon_button"/> </td>
        <td align="center"><input id="emoticon2" type="image" src="AssetImages/emoticon2.png" name="button" value="Proud" class="emoticon_button"/> </td>
        <td align="center"><input id="emoticon3" type="image" src="AssetImages/emoticon3.png" name="button" value="Boring" class="emoticon_button"/> </td>
    </tr>
</table>
</div>
<input id="happy1" type = "button" onclick="happybutton()" value= "happy" >
<input id="sad1" type = "button" onclick="sadbutton()" value= "sad" >
<input id="button1" type="button" value="getfocus" onclick="getFocus();">



<div>
    관심사 : <br>
    <select id="graphSelector" name="graph" onchange="graphselect();">
        <option value = "1" selected="selected">area graph</option>
        <option value = "2">line graph</option>
        <option value = "3">pie graph</option>
        <option value = "4">halfpie graph</option>
    </select>
    <input id="exit" type = "button" onclick="dis();" value= "exit" />
</div>

<div id="visualization" style="width: 800px; height: 400px;"></div>
<div class="areadiv">
    <svg id="stackedarea"></svg>
</div>

<div class="linediv" id="linechart">
    <svg style="..."></svg>
</div>

<div class="piediv" id="pichart">
    <svg id="pie" class="mypiechart"></svg>
</div>

<div class="halfdiv" id="halfchart">
    <svg id="halfpi" class="mypiechart"></svg>
</div>

</body>
</html>